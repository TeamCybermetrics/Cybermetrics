name: Frontend CI/CD

on:
  push:
    branches: [ main, develop ]
    paths:
      - 'client/**'
      - '.github/workflows/frontend-ci.yml'
  pull_request:
    branches: [ main, develop ]
    paths:
      - 'client/**'

jobs:
  test:
    runs-on: ubuntu-latest
    
    defaults:
      run:
        working-directory: ./client
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
        cache-dependency-path: client/package-lock.json
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run linter
      run: npm run lint
      continue-on-error: true
    
    - name: Run type check
      run: npx tsc --noEmit
      continue-on-error: true
    
    - name: Build
      run: npm run build
      env:
        # Add any client-side environment variables here
        # VITE_API_URL: https://api.example.com
        NODE_ENV: production
    
    - name: Run tests (if you have them)
      run: |
        # Uncomment when you add tests
        # npm test
      continue-on-error: true

  # Uncomment when you're ready to deploy
  # deploy:
  #   needs: test
  #   runs-on: ubuntu-latest
  #   if: github.ref == 'refs/heads/main' && github.event_name == 'push'
  #   
  #   steps:
  #   - name: Deploy to production
  #     run: |
  #       echo "Add your deployment steps here"
  #       # e.g., deploy to Vercel, Netlify, etc.
